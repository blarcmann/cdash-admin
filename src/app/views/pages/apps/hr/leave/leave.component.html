<kt-portlet>
	<kt-portlet-header [title]="pageTitle" [class]="'kt-portlet__head--lg'" [viewLoading$]="loading$">
		<ng-container ktPortletTools>
			<div class="details-action edit text-center" routerLink="/strada/hr/leave/edit/{{leaveId}}">
				<img src="./assets/media/icons/details-edit.svg" alt="">
				<span>Edit</span>
			</div>
			<div class="details-action delete text-center" (click)="onDelete()">
				<img src="./assets/media/icons/details-delete.svg" alt="">
				<span>Reject</span>
			</div>
			<div class="details-action approve text-center" *ngIf="leaveDetails && !leaveDetails.approved"
				(click)="approveLeave(leaveId)">
				<img src="./assets/media/icons/details-approve.svg" alt="">
				<span>Approve</span>
			</div>
		</ng-container>
	</kt-portlet-header>
	<kt-portlet-body>
			<div class="goback" (click)="goBack()">
					<img src="./assets/media/icons/backBtn.svg" alt="">
					<span>Back</span>
				</div>
		<div class="lead-body" *ngIf="leaveDetails">
			<div *ngIf="!leaveDetails" class="mt-5 please-data text-center">Please Wait...</div>
			<div class="item-details mt-4">
				<div class="row">
					<div class="col-xl-7">
						<div class="details">
							<table class="ml-5 details-table">
								<tr class="each-data" *ngIf="leaveDetails.name">
									<td class="label">Title/Name</td>
									<td class="value">{{ leaveDetails.name }}</td>
								</tr>
								<tr class="each-data" *ngIf="userDetails && userDetails.name">
									<td class="label">Requested by</td>
									<td class="value status"><span
											class="plain">{{ userDetails.name | uppercase }}</span></td>
								</tr>
								<tr class="each-data" *ngIf="singleClaimType && singleClaimType.roles">
									<td class="label">Approval Flow</td>
									<td class="value"> USER >>> {{singleClaimType.roles.join(' >>> ') | uppercase}}</td>
								</tr>
								<tr class="each-data">
									<td class="label">Leave start date</td>
									<td class="value">
										{{ leaveDetails.start | date: "fullDate" }}
									</td>
								</tr>
								<tr class="each-data">
									<td class="label">Leave end date</td>
									<td class="value">
										{{ leaveDetails.end | date: "fullDate" }}
									</td>
								</tr>
								<tr class="each-data">
									<td class="label">Date updated</td>
									<td class="value">
										{{ leaveDetails.updated_at | date: "medium" }}
									</td>
								</tr>
								<tr class="each-data">
									<td class="label">Date created</td>
									<td class="value">
										{{ leaveDetails.created_at | date: "medium" }}
									</td>
								</tr>
							</table>
						</div>
					</div>
					<div class="col-xl-5">
						<div class="side-form approval">
							<div class="title-status">
								<div class="title">Request Status</div>
								<div class="status"
									[ngClass]="leaveDetails && leaveDetails.approved ? 'approved' : 'pending'">
									{{leaveDetails.approved ? 'Approved' : 'Pending'}}</div>
							</div>
							<div class="approval-cover">
								<div class="each-level approved">
									<div class="notification approved"></div>
									<div class="level-info">
										<div class="leveler">Staff</div>
										<div class="into">Sent leave request</div>
									</div>
								</div>
								<div class="each-level"
									[ngClass]="leaveDetails && leaveDetails.approved ? 'approved' : 'pending'">
									<div class="notification"
										[ngClass]="leaveDetails && leaveDetails.approved ? 'approved' : 'pending'">
									</div>
									<div class="level-info">
										<div class="leveler">Leave approvals</div>
										<div class="into">{{ leaveDetails.approved ? 'Approved' : 'Pending' }}</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</kt-portlet-body>
</kt-portlet>
